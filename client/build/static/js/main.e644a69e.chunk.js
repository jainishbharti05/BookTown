(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,a){e.exports=a(55)},38:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),l=a(2),i=a(11),s=a(1),m=a(5),u=a.n(m),p=a(10),d=function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},g=a(3);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var b=function(e,t){var a=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{count:1})),a=Array.from(new Set(a.map((function(e){return e._id})))).map((function(e){return a.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(a)),t())},v=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"#ffffff"}},y=Object(i.g)((function(e){var t=e.history;return r.a.createElement("div",null,r.a.createElement("ul",{className:"nav nav-tabs bg-dark",style:{height:50}},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:v(t,"/"),to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:v(t,"/shop"),to:"/shop"},"Shop")),!E()&&r.a.createElement(n.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:v(t,"/signin"),to:"/signin"},"Login")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:v(t,"/signup"),to:"/signup"},"SignUp")),r.a.createElement("li",{className:"nav-item ml-auto"},r.a.createElement(l.b,{className:"nav-link",style:v(t,"/about"),to:"/about"},"About"))),E()&&r.a.createElement(n.Fragment,null,E()&&0===E().user.role&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:v(t,"/user/dashboard"),to:"/user/dashboard"},"Dashboard")),E()&&1===E().user.role&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:v(t,"/admin/dashboard"),to:"/admin/dashboard"},"Dashboard")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:v(t,"/cart"),to:"/cart"},"Cart ",r.a.createElement("sup",null,r.a.createElement("small",{className:"cart-badge"},void 0!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0)))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{className:"nav-link",style:v(t,"/about"),to:"/about"},"About")),r.a.createElement("li",{className:"nav-item ml-auto"},r.a.createElement("span",{className:"nav-link",style:{cursor:"pointer",color:"#ffffff"},onClick:function(){return function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("/api/signout",{method:"GET"}).then((function(e){console.log("signout",e)})).catch((function(e){return console.log(e)}))}((function(){t.push("/")}))}},"Logout")))))})),N=(a(38),function(e){var t=e.title,a=void 0===t?"Title":t,n=e.description,c=void 0===n?"Description":n,o=e.className,l=e.children;return r.a.createElement("div",null,r.a.createElement(y,null),r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h2",null,a),r.a.createElement("p",{className:"lead"},c)),r.a.createElement("div",{className:o},l))}),O=a(26),j=a.n(O),w=function(e){return fetch("/api/products?sortBy=".concat(e,"&order=desc&limit=6"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},P=function(){return fetch("/api/categories",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},S=function(){var e=Object(p.a)(u.a.mark((function e(t,a){var n,r,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:{},r={limit:a,skip:t,filters:n},e.abrupt("return",fetch("/api/products/by/search",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).catch((function(e){console.log(e)})));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k=function(e){var t=e.item,a=e.url;return r.a.createElement("div",{className:"product-img"},r.a.createElement("img",{src:"/api/".concat(a,"/photo/").concat(t._id),alt:t.name,className:"mb-3",style:{maxHeight:"100%",maxWidth:"100%"}}))},x=a(12),C=a.n(x),D=function(e){var t=e.product,a=e.showViewProductButton,c=void 0===a||a,o=e.showAddToCartButton,m=void 0===o||o,u=e.cartUpdate,p=void 0!==u&&u,d=e.showRemoveProductButton,f=void 0!==d&&d,E=e.setRun,g=void 0===E?function(e){return e}:E,h=e.run,v=void 0===h?void 0:h,y=Object(n.useState)(!1),N=Object(s.a)(y,2),O=N[0],j=N[1],w=Object(n.useState)(t.count),P=Object(s.a)(w,2),S=P[0],x=P[1],D=function(){b(t,(function(){j(!0)}))},T=function(e){return function(t){g(!v),x(t.target.value<1?1:t.target.value),t.target.value>=1&&function(e,t){var a=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.forEach((function(a){a._id===e&&(a.count=t)})),localStorage.setItem("cart",JSON.stringify(a)))}(e,t.target.value)}};return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header name text-center"},t.name),r.a.createElement("div",{className:"card-body"},function(e){if(e)return r.a.createElement(i.a,{to:"/cart"})}(O),r.a.createElement(k,{item:t,url:"product"}),r.a.createElement("p",{className:"mt-2"},t.description),r.a.createElement("p",{className:"font-weight-bold"},"\u20b9 ",t.price),r.a.createElement("p",{className:"black-10"},"Category: ",t.category&&t.category.name),r.a.createElement("p",{className:"black-8"},"Added ",C()(t.createdAt).fromNow()),t.quantity>0?r.a.createElement("span",{className:"badge badge-primary badge-pill"},"In Stock"):r.a.createElement("span",{className:"badge badge-danger badge-pill"},"Out of Stock"),r.a.createElement("br",null),function(e){return e&&r.a.createElement(l.b,{to:"/product/".concat(t._id),className:"mr-2"},r.a.createElement("button",{className:"btn btn-outline-primary mt-2 mb-2 mr-2"},"View Product"))}(c),function(e){return e&&r.a.createElement("button",{onClick:function(){!function(e){var t=[];void 0!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.forEach((function(a,n){a._id===e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(t._id),g(!v)},className:"btn btn-outline-danger mt-2 mb-2"},"Remove Product")}(f),function(e){return e&&r.a.createElement("button",{onClick:D,className:"btn btn-outline-warning mt-2 mb-2"},"Add to Cart")}(m),function(e){return e&&r.a.createElement("div",null,r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text"},"Adjust Quantity")),r.a.createElement("input",{type:"number",value:S,className:"form-control",onChange:T(t._id)})))}(p)))};function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _=function(){var e=Object(n.useState)({categories:[],category:"",search:"",results:[],searched:!1}),t=Object(s.a)(e,2),a=t[0],c=t[1],o=a.categories,l=a.category,i=a.search,m=a.results,u=a.searched;Object(n.useEffect)((function(){P().then((function(e){e.error?console.log(e.error):c(A({},e,{categories:e}))}))}),[]);var p=function(){i&&function(e){var t=j.a.stringify(e);return fetch("/api/products/search?".concat(t),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}({search:i||void 0,category:l}).then((function(e){e.error?console.log(e.error):c(A({},a,{results:e,searched:!0}))}))},d=function(e){e.preventDefault(),p()},f=function(e){return function(t){var n;c(A({},a,(n={},Object(g.a)(n,e,t.target.value),Object(g.a)(n,"searched",!1),n)))}},E=function(e,t){return e&&t.length>0?"Found ".concat(t.length," products"):e&&t.length<1?"No Products Found":void 0};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"container mb-3"},r.a.createElement("form",{onSubmit:d},r.a.createElement("span",{className:"input-group-text"},r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("select",{className:"btn mr-2",onChange:f("category")},r.a.createElement("option",{value:"All"},"All Categories"),o.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("input",{type:"search",className:"form-control",onChange:f("search"),placeholder:"Search by name"})),r.a.createElement("div",{className:"btn input-group-append",style:{border:"none"}},r.a.createElement("button",{className:"input-group-text"},"Search"))))),r.a.createElement("div",{className:"container-fluid mb-3"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.a.createElement("div",null,r.a.createElement("h2",{className:"mt-4 mb-4"},E(u,e)),r.a.createElement("div",{className:"row"},e.map((function(e,t){return r.a.createElement(D,{key:t,product:e})}))))}(m)))},I=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(s.a)(o,2),i=l[0],m=l[1],u=Object(n.useState)(!1),p=Object(s.a)(u,2),d=p[0],f=p[1],E=Object(n.useState)(!0),g=Object(s.a)(E,2),h=g[0],b=g[1],v=function(){return h&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",null,"Loading..."))};return Object(n.useEffect)((function(){w("sold").then((function(e){e.err?(f(e.err),console.log(d),b(!1)):(c(e),b(!1))})),w("createdAt").then((function(e){e.err?(f(e.err),b(!1)):(m(e),b(!1))})),v()}),[]),r.a.createElement(N,{title:"Booktown - Resell & Explore",description:"Buy and Explore some awesome books here!",className:"container-fluid"},r.a.createElement(_,null),r.a.createElement("h2",{className:"mb-4"},"New Arrivals"),v(),r.a.createElement("div",{className:"row"},i.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-4 mb-3"},r.a.createElement(D,{product:e}))}))),r.a.createElement("h2",{className:"mb-4"},"Best Sellers"),v(),r.a.createElement("div",{className:"row"},a.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-4 mb-3"},r.a.createElement(D,{product:e}))}))))};function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(s.a)(e,2),a=t[0],c=t[1],o=a.name,i=a.email,m=a.password,u=a.success,p=a.error,f=function(e){return function(t){c(J({},a,Object(g.a)({error:!1},e,t.target.value)))}},E=function(e){e.preventDefault(),c(J({},a,{error:!1})),d({name:o,email:i,password:m}).then((function(e){e.error?c(J({},a,{error:e.error,success:!1})):c(J({},a,{name:"",email:"",password:"",error:"",success:!0}))}))};return r.a.createElement(N,{title:"Signup",description:"Sign up to the Node React E-commerce app",className:"container col-md-8 offset-md-2"},r.a.createElement("div",{className:"alert alert-danger",style:{display:p?"":"none"}},p),r.a.createElement("div",{className:"alert alert-info",style:{display:u?"":"none"}},"New account is created. Please ",r.a.createElement(l.b,{to:"/signin"},"Signin")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:f("name"),type:"text",className:"form-control",value:o})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:f("email"),type:"email",className:"form-control",value:i})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:f("password"),type:"password",className:"form-control",value:m})),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("button",{onClick:E,className:"btn btn-primary"},"Submit"))))};function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=function(){var e=Object(n.useState)({email:"",password:"",error:"",loading:!1,redirectToReferrer:!1}),t=Object(s.a)(e,2),a=t[0],c=t[1],o=a.email,l=a.password,m=a.loading,u=a.error,p=a.redirectToReferrer,d=E().user,h=function(e){return function(t){c(z({},a,Object(g.a)({error:!1},e,t.target.value)))}},b=function(e){e.preventDefault(),c(z({},a,{error:!1,loading:!0})),f({email:o,password:l}).then((function(e){e.err?c(z({},a,{error:e.err,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){c(z({},a,{redirectToReferrer:!0,loading:!1}))}))}))};return r.a.createElement(N,{title:"Signin",description:"Login to your account to view and purchase awesome content",className:"container col-md-8 offset-md-2"},r.a.createElement("div",{className:"alert alert-danger",style:{display:u?"":"none"}},u),m&&r.a.createElement("div",{className:"alert alert-info"},r.a.createElement("h2",null,"Loading...")),p?1===d.role?r.a.createElement(i.a,{to:"/admin/dashboard"}):r.a.createElement(i.a,{to:"/user/dashboard"}):E()?r.a.createElement(i.a,{to:"/"}):void 0,r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{onChange:h("email"),type:"email",className:"form-control",value:o})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{onChange:h("password"),type:"password",className:"form-control",value:l})),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("button",{onClick:b,className:"btn btn-primary"},"Submit"))))},R=a(15),q=function(e){var t=e.component,a=Object(R.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return E()?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/signin"})}}))},F=function(e){var t=e.component,a=Object(R.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return E()&&1===E().user.role?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/signin"})}}))},M=a(14),Y=function(e){var t=e.categories,a=e.handleFilters,c=Object(n.useState)([]),o=Object(s.a)(c,2),l=o[0],i=o[1],m=function(e){return function(){var t=l.indexOf(e),n=Object(M.a)(l);-1===t?n.push(e):n.splice(t,1),i(n),a(n)}};return t.map((function(e,t){return r.a.createElement("li",{key:t,className:"list-unstyled"},r.a.createElement("input",{onChange:m(e._id),value:l.indexOf(-1===e._id),type:"checkbox",className:"form-check-input"}),r.a.createElement("label",{className:"form-check-label"},e.name))}))},W=function(e){var t=e.prices,a=e.handleFilters,c=Object(n.useState)(0),o=Object(s.a)(c,2),l=o[0],i=o[1],m=function(e){a(e.target.value),i(e.target.value),console.log(l)};return t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("input",{onChange:m,value:"".concat(e._id),type:"radio",name:e,className:"mr-2 ml-4"}),r.a.createElement("label",{className:"form-check-label"},e.name))}))},Q=[{_id:0,name:"Any",array:[]},{_id:1,name:"\u20b90 to 200",array:[0,200]},{_id:2,name:"\u20b9200 to 500",array:[200,500]},{_id:3,name:"\u20b9500 to 750",array:[500,1e3]},{_id:4,name:"\u20b9750+",array:[750,99999]}];function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var H=function(){var e=Object(n.useState)({filters:{category:[],price:[]}}),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(s.a)(o,2),i=l[0],m=l[1],u=Object(n.useState)(!1),p=Object(s.a)(u,2),d=p[0],f=p[1],E=Object(n.useState)(6),h=Object(s.a)(E,1)[0],b=Object(n.useState)(0),v=Object(s.a)(b,2),y=v[0],O=v[1],j=Object(n.useState)(0),w=Object(s.a)(j,2),k=w[0],x=w[1],C=Object(n.useState)([]),T=Object(s.a)(C,2),A=T[0],_=T[1],I=Object(n.useState)(!0),B=Object(s.a)(I,2),J=B[0],L=B[1],U=function(e){S(y,h,e).then((function(e){e.error?(f(e.error),L(!1)):(_(e.data),L(!1),x(e.size),O(0))}))},z=function(){var e=y+h;S(e,h,a.filters).then((function(t){t.error?(f(t.error),L(!1)):(_([].concat(Object(M.a)(A),Object(M.a)(t.data))),x(t.size),L(!1),O(e))}))},G=function(){return J&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",null,"Loading..."))};Object(n.useEffect)((function(){P().then((function(e){e.error?(f(e.error),console.log(d),L(!1)):(m(e),L(!1))})),U(y,a.filters),G()}),[]);var R=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a);if(n.filters[t]=e,"price"===t){var r=q(e);n.filters[t]=r}U(a.filters),c(n)},q=function(e){var t=Q,a=[];for(var n in t)t[n]._id===parseInt(e)&&(a=t[n].array);return a};return r.a.createElement(N,{title:"Shop Page",description:"Search and find books of your choice",className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-4"},r.a.createElement("h4",null,"Filter by categories"),r.a.createElement("ul",null,r.a.createElement(Y,{categories:i,handleFilters:function(e){return R(e,"category")}})),r.a.createElement("h4",null,"Filter by price range"),r.a.createElement("div",null,r.a.createElement(W,{prices:Q,handleFilters:function(e){return R(e,"price")}}))),r.a.createElement("div",{className:"col-8"},r.a.createElement("h2",{className:"mb-4"},"Products"),G(),r.a.createElement("div",{className:"row"},A.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-4 mb-3"},r.a.createElement(D,{product:e}))}))),r.a.createElement("hr",null),k>0&&k>=h&&r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{onClick:z,className:"btn btn-warning mb-5"},"Load more")))))},$=a(27),K=a.n($);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ee=function(e){var t=e.products,a=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),c=Object(s.a)(a,2),o=c[0],i=c[1],m=E()&&E().user._id,u=E()&&E().token,p=function(e,t){(function(e,t){return fetch("/api/braintree/getToken/".concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?i(Z({},e,{error:e.error})):i({clientToken:e.clientToken})}))};Object(n.useEffect)((function(){p(m,u)}),[]);var d,f,g=function(e){i(Z({},o,{address:e.target.value}))},h=function(){return t.reduce((function(e,t){return e+t.count*t.price}),0)},b=o.address,v=function(){i({loading:!0}),o.instance.requestPaymentMethod().then((function(e){var a={paymentMethodNonce:e.nonce,amount:h()};(function(e,t,a){return fetch("/api/braintree/payment/".concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.json(e)})).catch((function(e){return console.log(e)}))})(m,u,a).then((function(e){console.log(e);var a={products:t,transaction_id:e.transaction.id,amount:e.transaction.amount,address:b};(function(e,t,a){return fetch("/api/order/create/".concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(m,u,a).then((function(e){var t;t=function(){console.log("payment success and empty cart"),i({loading:!1,success:!0})},"undefined"!==typeof window&&(localStorage.removeItem("cart"),t()),setTimeout((function(){return window.location.reload()}),2200)})).catch((function(e){console.log(e),i({loading:!1})}))})).catch((function(e){console.log(e),i({loading:!1})}))})).catch((function(e){i(Z({},o,{error:e.message}))}))},y=function(){return r.a.createElement("div",{onBlur:function(){return i(Z({},o,{error:""}))}},null!==o.clientToken&&t.length>0?r.a.createElement("div",null,r.a.createElement("div",{className:"gorm-group mb-3",style:{display:o.success?"none":""}},r.a.createElement("label",{className:"text-muted"},"Delivery address:"),r.a.createElement("textarea",{onChange:g,className:"form-control",value:o.address,placeholder:"Please enter your shipping address here.."})),r.a.createElement(K.a,{options:{authorization:o.clientToken,paypal:{flow:"vault"}},onInstance:function(e){return o.instance=e}}),r.a.createElement("button",{onClick:v,className:"btn btn-success btn-block",style:{display:o.success?"none":""}},"Pay")):null)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Total: \u20b9 ",h()),r.a.createElement("p",null,"Try checking out with a dummy credit card number like 4111 1111 1111 1111 and any expiration date and cvv"),o.loading&&r.a.createElement("h2",{className:"text-danger"},"Loading..."),(f=o.success,r.a.createElement("div",{className:"alert alert-info",style:{display:f?"":"none"}},"Thanks! Your payment was successful! Please check your email")),(d=o.error,r.a.createElement("div",{className:"alert alert-danger",style:{display:d?"":"none"}},d)),E()?r.a.createElement("div",null,y()):r.a.createElement(l.b,{to:"/signin"},r.a.createElement("button",{className:"btn btn-primary"},"Sign in to checkout")))},te=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),m=i[0],u=i[1];return Object(n.useEffect)((function(){c(void 0!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[m]),r.a.createElement(N,{title:"My Cart",description:"Manage your cart items. Add, Remove, Checkout or continue shopping",className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},a.length>0?function(e){return r.a.createElement("div",null,r.a.createElement("h2",null,"Your cart has ","".concat(e.length)," items"),r.a.createElement("hr",null),e.map((function(e,t){return r.a.createElement(D,{key:t,product:e,showAddToCartButton:!1,cartUpdate:!0,showRemoveProductButton:!0,setRun:u,run:m})})))}(a):r.a.createElement("div",null,r.a.createElement("h2",null,"Your cart is empty"),r.a.createElement("br",null),r.a.createElement(l.b,{to:"/shop"},"Start Shopping now!"))),r.a.createElement("div",{className:"col-6"},r.a.createElement("h2",{className:"mb-4"},"Cart summary"),r.a.createElement("hr",null),r.a.createElement(ee,{products:a}))))},ae=function(e){var t=Object(n.useState)({}),a=Object(s.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),i=Object(s.a)(l,2),m=i[0],u=i[1],p=Object(n.useState)(!1),d=Object(s.a)(p,2),f=d[0],E=d[1],g=Object(n.useState)(!0),h=Object(s.a)(g,2),b=h[0],v=h[1],y=function(e){(function(e){return fetch("/api/product/".concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(e).then((function(e){e.err?(E(e.err),console.log(f),v(!1)):(o(e),function(e){return fetch("/api/products/related/".concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e._id).then((function(e){e.err?E(e.err):u(e)})),v(!1))}))},O=function(){return b&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",{className:"text-center"},"Loading..."))};return Object(n.useEffect)((function(){var t=e.match.params.productId;y(t),O()}),[e]),r.a.createElement(n.Fragment,null,b?O():r.a.createElement(N,{title:c&&c.name,description:c&&c.description&&c.description.substring(0,100),className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},c&&c.description&&r.a.createElement(D,{product:c,showViewProductButton:!1})),r.a.createElement("div",{className:"col-4"},r.a.createElement("h4",null,"Related Products"),m.map((function(e,t){return r.a.createElement("div",{className:"mb-3"},r.a.createElement(D,{key:t,product:e}))}))))))},ne=function(){var e=E(),t=e.user,a=t._id,c=t.name,o=t.email,i=t.role,m=e.token,u=Object(n.useState)([]),p=Object(s.a)(u,2),d=p[0],f=p[1],g=function(e,t){(function(e,t){return fetch("/api/orders/by/user/".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?console.log(e.error):f(e)}))};Object(n.useEffect)((function(){g(a,m)}),[]);return r.a.createElement(N,{title:"Dashboard",description:"Welcome, ".concat(c),className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"xs-col-12 col-sm-4"},r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h4",{className:"card-header text-center"},"User Links"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{to:"/cart",className:"nav-link"},"My Shopping Cart")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{to:"/profile/".concat(a),className:"nav-link"},"Update Profile"))))),r.a.createElement("div",{className:"xs-col-12 col-sm-8"},r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header text-center"},"User Information"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},c),r.a.createElement("li",{className:"list-group-item"},o),r.a.createElement("li",{className:"list-group-item"},1===i?"Admin":"User id : ".concat(a)))),function(e){return r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header"},"Purchase history"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},e.map((function(e,t){return r.a.createElement("div",null,r.a.createElement("hr",null),e.products.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("h6",null,"Product name: ",e.name),r.a.createElement("h6",null,"Product price: $",e.price),r.a.createElement("h6",null,"Purchased date:"," ",C()(e.createdAt).fromNow()))})))})))))}(d))))},re=function(){var e=E().user,t=e._id,a=e.name,n=e.email,c=e.role;return r.a.createElement(N,{title:"Admin Dashboard",description:"Welcome, ".concat(a),className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"xs-col-12 col-sm-4"},r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h4",{className:"card-header text-center"},"Admin Links"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{to:"/create/category",className:"nav-link"},"Create Category")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{to:"/create/product",className:"nav-link"},"Create Product")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{to:"/admin/orders",className:"nav-link"},"Manage Orders")),r.a.createElement("li",{className:"list-group-item"},r.a.createElement(l.b,{to:"/admin/products",className:"nav-link"},"Manage Products"))))),r.a.createElement("div",{className:"xs-col-12 col-sm-8"},r.a.createElement("div",{className:"card mb-5"},r.a.createElement("h3",{className:"card-header text-center"},"Admin Information"),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item"},a),r.a.createElement("li",{className:"list-group-item"},n),r.a.createElement("li",{className:"list-group-item"},1===c?"Admin":"User id : ".concat(t)))))))};function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var le=function(e){var t=e.match,a=Object(n.useState)({name:"",email:"",password:"",error:!1,loading:!0,success:!1}),c=Object(s.a)(a,2),o=c[0],l=c[1],m=o.name,u=o.email,p=o.password,d=(o.error,o.success),f=o.loading,h=E().token,b=function(e){(function(e,t){return fetch("/api/user/".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))})(e,h).then((function(e){e.error?l(oe({},o,{error:!0,loading:!1})):l(oe({},o,{name:e.name,email:e.email,loading:!1}))}))},v=function(e){return function(t){l(oe({},o,Object(g.a)({error:!1},e,t.target.value)))}},y=function(e){e.preventDefault(),function(e,t,a){return fetch("/api/user/".concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.userId,h,{name:m,email:u,password:p}).then((function(e){e.error?console.log(e.error):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var a=JSON.parse(localStorage.getItem("jwt"));a.user=e,localStorage.setItem("jwt",JSON.stringify(a)),t()}}(e,(function(){l(oe({},o,{name:e.name,email:e.email,success:!0}))}))}))},O=function(){return f&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",null,"Loading..."))};return Object(n.useEffect)((function(){b(t.params.userId),O()}),[]),r.a.createElement(N,{title:"My Profile",description:"Update your profile",className:"container-fluid"},r.a.createElement("h2",null,"Profile Update"),O(),function(e,t,a){return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{type:"text",value:e,onChange:v("name"),className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Email"),r.a.createElement("input",{type:"email",value:t,onChange:v("email"),className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Password"),r.a.createElement("input",{type:"password",value:a,onChange:v("password"),className:"form-control"})),r.a.createElement("button",{onClick:y,className:"btn btn-primary"},"Submit"))}(m,u,p),function(e){if(e)return r.a.createElement(i.a,{to:"/dashboard"})}(d))},ie=function(){var e=Object(p.a)(u.a.mark((function e(t,a,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/category/create/".concat(t),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),se=function(){var e=Object(p.a)(u.a.mark((function e(t,a,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/product/create/".concat(t),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:n}).then((function(e){return e.json()})).catch((function(e){console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),me=function(){return fetch("/api/categories",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},ue=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(s.a)(o,2),i=l[0],m=l[1],u=Object(n.useState)(!1),p=Object(s.a)(u,2),d=p[0],f=p[1],g=E(),h=g.user,b=g.token,v=function(e){m(!1),c(e.target.value)},y=function(e){e.preventDefault(),m(!1),f(!1),ie(h._id,b,{name:a}).then((function(e){e.error?m(!0):(m(!1),f(!0))}))};return r.a.createElement(N,{title:"Add a new Category",description:"Ready to add a new category?"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"xs-col-12 col-sm-8"},function(){if(d)return r.a.createElement("h3",{className:"text-success"},a," is created")}(),function(){if(i)return r.a.createElement("h3",{className:"text-danger"},a," is not unique")}(),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group text-center"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:v,type:"name",className:"form-control",value:a,required:!0})),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("button",{onClick:y,className:"btn btn-primary"},"Submit"))))))};function pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fe=function(){var e=E(),t=e.user,a=e.token,c=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:0,photo:"",loading:!1,error:"",createdProduct:"",formData:""}),o=Object(s.a)(c,2),l=o[0],i=o[1],m=l.name,u=l.description,p=l.price,d=l.categories,f=l.category,h=l.shipping,b=l.quantity,v=l.loading,y=l.error,O=l.createdProduct,j=l.formData;Object(n.useEffect)((function(){me().then((function(e){e.err?i(de({},l,{error:e.err})):i(de({},l,{categories:e,formData:new FormData}))}))}),[]);var w=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;j.set(e,a),i(de({},l,Object(g.a)({},e,a)))}},P=function(e){e.preventDefault(),i(de({},l,{error:"",loading:!0})),se(t._id,a,j).then((function(e){e.err?i(de({},l,{error:e.err})):i(de({},l,{name:"",description:"",photo:"",price:"",quantity:0,loading:"",category:"",shipping:"",createdProduct:e.name}))}))};return r.a.createElement(N,{title:"Add a new Product",description:"Ready to add a new Product?"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},r.a.createElement("div",{className:"alert alert-danger",style:{display:y?"":"none"}},y),r.a.createElement("div",{className:"alert alert-info",style:{display:O?"":"none"}},r.a.createElement("h2",null,"".concat(O)," is created")),v&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("form",{className:"mb-3",onSubmit:P},r.a.createElement("h4",null,"Post photo"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"btn btn-secondary"},r.a.createElement("input",{onChange:w("photo"),type:"file",name:"photo",accept:"image/*"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Name"),r.a.createElement("input",{onChange:w("name"),type:"text",className:"form-control",value:m})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Description"),r.a.createElement("textarea",{onChange:w("description"),className:"form-control",value:u})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Price"),r.a.createElement("input",{onChange:w("price"),type:"number",className:"form-control",value:p})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Category"),r.a.createElement("select",{onChange:w("category"),className:"form-control",value:f},r.a.createElement("option",null,"Select"),d&&d.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Shipping"),r.a.createElement("select",{onChange:w("shipping"),className:"form-control",value:h},r.a.createElement("option",null,"Please Select"),r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Quantity"),r.a.createElement("input",{onChange:w("quantity"),type:"number",className:"form-control",value:b})),r.a.createElement("button",{className:"btn btn-outline-primary"},"Create Product")))))};function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ee(a,!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he=function(e){var t=e.match,a=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:!1,createdProduct:"",redirectToProfile:!1,formData:""}),c=Object(s.a)(a,2),o=c[0],l=c[1],m=E(),u=m.user,p=m.token,d=o.name,f=o.description,h=o.price,b=o.categories,v=(o.category,o.shipping,o.quantity),y=o.loading,O=o.error,j=o.createdProduct,w=o.redirectToProfile,P=o.formData,S=function(e){(function(e){return fetch("/api/product/".concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?l(ge({},o,{error:e.error})):(l(ge({},o,{name:e.name,description:e.description,price:e.price,category:e.category._id,shipping:e.shipping,quantity:e.quantity,formData:new FormData})),k())}))},k=function(){me().then((function(e){e.error?l(ge({},o,{error:e.error})):l({categories:e,formData:new FormData})}))};Object(n.useEffect)((function(){S(t.params.productId)}),[]);var x=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;P.set(e,a),l(ge({},o,Object(g.a)({},e,a)))}},C=function(e){e.preventDefault(),l(ge({},o,{error:"",loading:!0})),function(e,t,a,n){return fetch("/api/product/".concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(a)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.productId,u._id,p,P).then((function(e){e.error?l(ge({},o,{error:e.error})):l(ge({},o,{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,error:!1,redirectToProfile:!0,createdProduct:e.name}))}))};return r.a.createElement(N,{title:"Add a new product",description:"G'day ".concat(u.name,", ready to add a new product?")},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},y&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",null,"Loading...")),r.a.createElement("div",{className:"alert alert-info",style:{display:j?"":"none"}},r.a.createElement("h2",null,"".concat(j)," is updated!")),r.a.createElement("div",{className:"alert alert-danger",style:{display:O?"":"none"}},O),r.a.createElement("form",{className:"mb-3",onSubmit:C},r.a.createElement("h4",null,"Post Photo"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"btn btn-secondary"},r.a.createElement("input",{onChange:x("photo"),type:"file",name:"photo",accept:"image/*"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Name"),r.a.createElement("input",{onChange:x("name"),type:"text",className:"form-control",value:d})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Description"),r.a.createElement("textarea",{onChange:x("description"),className:"form-control",value:f})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Price"),r.a.createElement("input",{onChange:x("price"),type:"number",className:"form-control",value:h})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Category"),r.a.createElement("select",{onChange:x("category"),className:"form-control"},r.a.createElement("option",null,"Please select"),b&&b.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Shipping"),r.a.createElement("select",{onChange:x("shipping"),className:"form-control"},r.a.createElement("option",null,"Please select"),r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"text-muted"},"Quantity"),r.a.createElement("input",{onChange:x("quantity"),type:"number",className:"form-control",value:v})),r.a.createElement("button",{className:"btn btn-outline-primary"},"Update Product")),function(){if(w&&!O)return r.a.createElement(i.a,{to:"/"})}())))},be=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),l=Object(s.a)(o,2),i=l[0],m=l[1],u=Object(n.useState)(!0),p=Object(s.a)(u,2),d=p[0],f=p[1],g=E(),h=g.user,b=g.token,v=function(){(function(e,t){return fetch("/api/order/list/".concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(h._id,b).then((function(e){e.error?(console.log(e.err),f(!1)):(c(e),f(!1))}))},y=function(){(function(e,t){return fetch("/api/order/status-values/".concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(h._id,b).then((function(e){e.error?(console.log(e.error),f(!1)):(m(e),f(!1))}))},O=function(e,t){(function(e,t,a,n){return fetch("/api/order/".concat(a,"/status/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:n,orderId:a})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(h._id,b,t,e.target.value).then((function(e){e.error?console.log("Status update fail"):v()}))},j=function(e,t){return r.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},e)),r.a.createElement("input",{type:"text",className:"form-control",value:t,readOnly:!0}))},w=function(){return d&&r.a.createElement("div",{className:"alert alert-success"},r.a.createElement("h2",null,"Loading..."))};return Object(n.useEffect)((function(){v(),y(),w()}),[]),r.a.createElement(N,{title:"Orders",description:"Manage all the orders here",className:"container"},w(),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"xs-col-12 col-sm-8"},a.length>0?r.a.createElement("h2",{className:"text-danger display-2"},"Total Orders: ",a.length):r.a.createElement("h1",{className:"text-danger"},"No Orders"),a.map((function(e,t){return r.a.createElement("div",{key:t,className:"mt-5",style:{borderBottom:"5px solid indigo"}},r.a.createElement("h2",{className:"mb-5"},r.a.createElement("span",{className:"bg-primary"},"Order Id : ",e._id)),r.a.createElement("ul",{className:"list-group mb-2"},r.a.createElement("li",{className:"list-group-item"},function(e){return r.a.createElement("div",{className:"form-group"},r.a.createElement("h3",{className:"mark mb-4"},"Status: ",e.status),r.a.createElement("select",{className:"form-control",onChange:function(t){return O(t,e._id)}},r.a.createElement("option",null,"Update Status"),i.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))}(e)),r.a.createElement("li",{className:"list-group-item"},"Transaction_id: ",e.transaction_id),r.a.createElement("li",{className:"list-group-item"},"Amount: ",e.amount),r.a.createElement("li",{className:"list-group-item"},"Ordered by: ",e.user.name),r.a.createElement("li",{className:"list-group-item"},"Order Date: ",C()(e.createdAt).fromNow()),r.a.createElement("li",{className:"list-group-item"},"Delivery address: ",e.address)),r.a.createElement("h5",{className:"mt-4 mb-4 font-italic"},"Total products in the order: ",e.products.length),e.products.map((function(e,t){return r.a.createElement("div",{className:"mb-4",key:t,style:{padding:"20px",border:"1px solid indigo"}},j("Product name",e.name),j("Product price",e.price),j("Product total",e.count),j("Product id",e._id))})))})))))},ve=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],o=a[1],i=E(),m=i.user,u=i.token,p=function(){fetch("/api/products?limit=100",{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):o(e)}))},d=function(e){(function(e,t,a){return fetch("/api/product/".concat(e,"/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,m._id,u).then((function(e){e.error?console.log(e.error):p()}))};return Object(n.useEffect)((function(){p()}),[]),r.a.createElement(N,{title:"Manage Products",description:"Perform CRUD on products"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",{className:"text-center"},"Total ",c.length," Products"),r.a.createElement("hr",null),r.a.createElement("ul",{className:"list-group"},c.map((function(e,t){return r.a.createElement("li",{key:t,className:"list-group-item d-flex justify-content-between align-items-center"},r.a.createElement("strong",null,e.name),r.a.createElement(l.b,{to:"/admin/products/update/".concat(e._id)},r.a.createElement("span",{className:"badge badge-warning badge-pill"},"Update")),r.a.createElement("span",{onClick:function(){return d(e._id)},className:"badge badge-danger badge-pill"},"Delete"))}))))))},ye=function(){return r.a.createElement(N,{title:"About",description:"Made with \u2764 by Jainish Bharti"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{href:"https://github.com/jainishbharti05",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("h2",null,"Github")),r.a.createElement("a",{href:"https://www.linkedin.com/in/jainishbharti/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("h2",null,"LinkedIn")),r.a.createElement("a",{href:"https://jainishbharti.me/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("h2",null,"Website")),r.a.createElement("a",{href:"mailto:imjainish007@gmail.com"},r.a.createElement("h2",null,"Email"))))},Ne=function(){return r.a.createElement(l.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:I}),r.a.createElement(i.b,{exact:!0,path:"/shop",component:H}),r.a.createElement(i.b,{exact:!0,path:"/product/:productId",component:ae}),r.a.createElement(i.b,{exact:!0,path:"/signin",component:G}),r.a.createElement(i.b,{exact:!0,path:"/signup",component:L}),r.a.createElement(i.b,{exact:!0,path:"/cart",component:te}),r.a.createElement(i.b,{exact:!0,path:"/about",component:ye}),r.a.createElement(q,{exact:!0,path:"/user/dashboard",component:ne}),r.a.createElement(q,{exact:!0,path:"/profile/:userId",component:le}),r.a.createElement(F,{exact:!0,path:"/admin/dashboard",component:re}),r.a.createElement(F,{exact:!0,path:"/create/category",component:ue}),r.a.createElement(F,{exact:!0,path:"/create/product",component:fe}),r.a.createElement(F,{exact:!0,path:"/admin/products/update/:productId",component:he}),r.a.createElement(F,{exact:!0,path:"/admin/orders",component:be}),r.a.createElement(F,{exact:!0,path:"/admin/products",component:ve})))};o.a.render(r.a.createElement(Ne,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.e644a69e.chunk.js.map